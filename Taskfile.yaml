version: "3"

dotenv: [".env"]

tasks:
  demo:
    desc: Open MCP Inspector for the cai-tools server defined in mcp.json
    cmds:
      - uv run python -m demo.app

  clear-cache:
    desc: Clear the cache directory
    cmds:
      - cd data/original && rm -rf -- */
      - cd data/comparison && rm -rf -- */

  compare:
    desc: Compare two songs and generate a similarity report
    cmds:
      - uv run python -m vibematcher.features.librosa_sim

  mert:
    desc: Generate MERT embeddings for audio files in the data/original directory
    cmds:
      - uv run python -m vibematcher.features.mert_embedder

  eval:
    desc: Run evaluation script on generated embeddings and print metrics
    cmds:
      - uv run python -m vibematcher.eval.evaluate

  f0:
    desc: Extract F0 features from an audio file
    cmds:
      - uv run python -m vibematcher.features.f0_wrapper

  f0-embedding:
    desc: Extract F0 embeddings from an audio file
    cmds:
      - uv run python -m vibematcher.features.f0_embedding 

  f0-sim:
    desc: Compare F0 features between two audio files
    cmds:
      - uv run python -m vibematcher.features.f0_sim